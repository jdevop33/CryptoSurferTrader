
root@iZt4ndx1mvq6rwcxzwalrjZ:~# # Go to the app directory
cd /opt/trading-app

# Stop any existing processes
pkill -f "node" 2>/dev/null || true
pm2 delete all 2>/dev/null || true

# Create a simple working server
cat > server.js << 'EOF'
const express = require('express');
const cors = require('cors');
const http = require('http');

const app = express();
const server = http.createServer(app);

app.use(cors());
app.use(express.json());

app.get('/', (req, res) => {
  res.send(`
<!DOCTYPE html>
<html>
<head>
    <title>8Trader8Panda - Live on Alibaba Cloud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; min-height: 100vh; }
        .container { max-width: 800px; margin: 0 auto; text-align: center; }
        .header { margin-bottom: 40px; }
        .logo { font-size: 4rem; margin-bottom: 20px; }
        .title { font-size: 3rem; font-weight: bold; margin-bottom: 10px; }
        .status { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin: 30px 0; }
        .online { color: #4ade80; font-weight: bold; }
        .api-links { margin: 30px 0; }
        .api-links a { background: rgba(255,255,255,0.2); color: white; padding: 10px 20px; margin: 10px; border-radius: 8px; text-decoration: none; display: inline-block; }
        .api-links a:hover { background: rgba(255,255,255,0.3); }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">ğŸ¼</div>
            <h1 class="title">8Trader8Panda</h1>
            <p>Professional Cryptocurrency Trading Platform</p>
        </div>
        
        <div class="status">
            <h2>System Status</h2>
echo "" Health: http://8.222.177.208:3000/api/health"ver starting..."s</p>
[1] 53921
file:///opt/trading-app/server.js:1
const express = require('express');
                ^

ReferenceError: require is not defined in ES module scope, you can use import instead
This file is being treated as an ES module because it has a '.js' file extension and '/opt/trading-app/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///opt/trading-app/server.js:1:17
    at ModuleJob.run (node:internal/modules/esm/module_job:263:25)
    at async ModuleLoader.import (node:internal/modules/esm/loader:540:24)
    at async asyncRunEntryPointWithESMLoader (node:internal/modules/run_main:117:5)

Node.js v20.19.2
[1]+  Exit 1                  node server.js
Server starting...
Skipping adding existing rule
Skipping adding existing rule (v6)
Firewall is active and enabled on system startup

âœ… 8Trader8Panda is now LIVE!
ğŸŒ Access: http://8.222.177.208:3000
ğŸ“Š Health: http://8.222.177.208:3000/api/health

root@iZt4ndx1mvq6rwcxzwalrjZ:/opt/trading-app# cd /opt/trading-app

# Fix the package.json module issue
cat > package.json << 'EOF'
{
  "name": "8trader8panda-production",
  "version": "1.0.0",
  "description": "Professional AI-Powered Cryptocurrency Trading System",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "node server.js"
  },
  "dependencies": {
    "express": "^4.18.0",
    "cors": "^2.8.5",
    "socket.io": "^4.7.0"
  }
}
EOF

# Create the fixed server file
cat > server.js << 'EOF'
const express = require('express');
const cors = require('cors');
const http = require('http');

const app = express();
const server = http.createServer(app);

app.use(cors());
app.use(express.json());

app.get('/', (req, res) => {
  res.send(`
<!DOCTYPE html>
<html>
<head>
    <title>8Trader8Panda - Live on Alibaba Cloud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; min-height: 100vh; }
        .container { max-width: 800px; margin: 0 auto; text-align: center; }
        .header { margin-bottom: 40px; }
        .logo { font-size: 4rem; margin-bottom: 20px; }
        .title { font-size: 3rem; font-weight: bold; margin-bottom: 10px; }
        .status { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin: 30px 0; }
        .online { color: #4ade80; font-weight: bold; }
        .api-links { margin: 30px 0; }
node server.jsrver/dev/null || true22.177.208:' + PORT + '/api/health');p>dding: 10px 20px; margin: 10px; border-radius: 8px; text-decoration: none; display: inline-block; }
ğŸš€ 8Trader8Panda Server LIVE!
ğŸŒ Access: http://8.222.177.208:3000
ğŸ“Š Health: http://8.222.177.208:3000/api/health

^C
root@iZt4ndx1mvq6rwcxzwalrjZ:/opt/trading-app# cd /opt/trading-app

# Fix the package.json module issue
cat > package.json << 'EOF'
{
  "name": "8trader8panda-production",
  "version": "1.0.0",
  "description": "Professional AI-Powered Cryptocurrency Trading System",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "node server.js"
  },
  "dependencies": {
    "express": "^4.18.0",
    "cors": "^2.8.5",
    "socket.io": "^4.7.0"
  }
}
EOF

# Create the fixed server file
cat > server.js << 'EOF'
const express = require('express');
const cors = require('cors');
const http = require('http');

const app = express();
const server = http.createServer(app);

app.use(cors());
app.use(express.json());

app.get('/', (req, res) => {
  res.send(`
<!DOCTYPE html>
<html>
<head>
    <title>8Trader8Panda - Live on Alibaba Cloud</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; min-height: 100vh; }
        .container { max-width: 800px; margin: 0 auto; text-align: center; }
        .header { margin-bottom: 40px; }
        .logo { font-size: 4rem; margin-bottom: 20px; }
        .title { font-size: 3rem; font-weight: bold; margin-bottom: 10px; }
        .status { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin: 30px 0; }
        .online { color: #4ade80; font-weight: bold; }
        .api-links { margin: 30px 0; }
node server.jsrver/dev/null || true22.177.208:' + PORT + '/api/health');p>dding: 10px 20px; margin: 10px; border-radius: 8px; text-decoration: none; display: inline-block; }
ğŸš€ 8Trader8Panda Server LIVE!
ğŸŒ Access: http://8.222.177.208:3000
ğŸ“Š Health: http://8.222.177.208:3000/api/health